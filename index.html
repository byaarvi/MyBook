<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Book Flipbook</title>
<style>
  body {
    margin: 0;
    background: #ccc;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  #flipbook {
    width: 800px;      /* total book width */
    height: 600px;     /* total book height */
    perspective: 2000px;
  }

  #flipbook .page {
    width: 400px;      /* half book width */
    height: 600px;
    background: white;
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
    overflow: hidden;
  }

  #flipbook canvas {
    display: block;
  }
</style>
</head>
<body>
<div id="flipbook"></div>

<!-- Libraries -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/turn.js@4/turn.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.worker.min.js"></script>

<script>
$(document).ready(function(){

  // PDF.js setup
  const pdfjsLib = window['pdfjs-dist/build/pdf'];
  pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.worker.min.js';

  // PDF file (GitHub Pages link)
  const pdfURL = 'https://byaarvi.github.io/MyBook/MyBook.pdf';
  const flipbook = document.getElementById('flipbook');

  // Load PDF
  pdfjsLib.getDocument(pdfURL).promise.then(pdf => {
      let loadedPages = 0;

      for (let i = 1; i <= pdf.numPages; i++) {
          const pageDiv = document.createElement('div');
          pageDiv.className = 'page';
          flipbook.appendChild(pageDiv);

          const canvas = document.createElement('canvas');
          pageDiv.appendChild(canvas);

          pdf.getPage(i).then(page => {
              const viewport = page.getViewport({ scale: 1 });
              const scale = pageDiv.clientWidth / viewport.width;
              const scaledViewport = page.getViewport({ scale: scale });

              canvas.width = scaledViewport.width;
              canvas.height = scaledViewport.height;

              page.render({
                  canvasContext: canvas.getContext('2d'),
                  viewport: scaledViewport
              }).promise.then(() => {
                  loadedPages++;
                  if (loadedPages === pdf.numPages) {
                      // Initialize turn.js after all pages rendered
                      $('#flipbook').turn({
                          width: 800,
                          height: 600,
                          display: 'double', // open book view
                          autoCenter: true,
                          acceleration: true
                      });
                  }
              });
          });
      }
  }).catch(err => console.error('PDF load error:', err));

});
</script>
</body>
</html>
